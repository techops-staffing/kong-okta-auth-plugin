language: python
sudo: false

services:
  - docker

env:
  - LUA="lua=5.1"

before_install:
  - pip install hererocks
  - hererocks env --$LUA -rlatest
  - source env/bin/activate
  - luarocks install kong
  - luarocks install busted
  - luarocks install lua-cjson
  - luarocks install lbase64
  - luarocks install luacrypto

install:
  - make

script:
  - make test
  - make build
  - make integration-test

notifications:
  email:
    on_success: never
    on_failure: never
